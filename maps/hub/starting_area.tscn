[gd_scene load_steps=21 format=3 uid="uid://c8n1llsvvhonb"]

[ext_resource type="MeshLibrary" uid="uid://uso6cfmk5r51" path="res://tileset white.tres" id="1_mdjaj"]
[ext_resource type="Script" uid="uid://domtntexnhum4" path="res://scenes/DungeonEncounter.gd" id="2_p7vp1"]
[ext_resource type="Texture2D" uid="uid://cjh84x068jx5c" path="res://balmer-andromalius-57x88-alpha.png" id="3_2g68h"]
[ext_resource type="Resource" uid="uid://glboqdt0keow" path="res://maps/_encounter/starting area/basic_test.tres" id="3_2pqfk"]
[ext_resource type="Texture2D" uid="uid://dc2rf27qhxx4g" path="res://ghost.png" id="7_g1pjd"]
[ext_resource type="Script" uid="uid://cs78wsbme5ww4" path="res://maps/hub/TransitionData.gd" id="7_kjsaj"]
[ext_resource type="Resource" uid="uid://d34tlmbjgrfkv" path="res://maps/_encounter/starting area/basic_test_2.tres" id="7_w2sle"]
[ext_resource type="Resource" uid="uid://ca1h8vjjk8vcm" path="res://maps/crypt/crypt_00.tres" id="8_w2sle"]

[sub_resource type="BoxShape3D" id="BoxShape3D_dwbtb"]
size = Vector3(1.46509, 2.61436, 0.1)

[sub_resource type="AtlasTexture" id="AtlasTexture_31n3i"]
atlas = ExtResource("3_2g68h")
region = Rect2(228, 176, 57, 88)

[sub_resource type="AtlasTexture" id="AtlasTexture_rfecp"]
atlas = ExtResource("3_2g68h")
region = Rect2(285, 176, 57, 88)

[sub_resource type="AtlasTexture" id="AtlasTexture_soaxv"]
atlas = ExtResource("3_2g68h")
region = Rect2(342, 176, 57, 88)

[sub_resource type="AtlasTexture" id="AtlasTexture_hddcw"]
atlas = ExtResource("3_2g68h")
region = Rect2(399, 176, 57, 88)

[sub_resource type="SpriteFrames" id="SpriteFrames_lwah8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_31n3i")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_rfecp")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_soaxv")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hddcw")
}],
"loop": true,
"name": &"Idle",
"speed": 6.0
}]

[sub_resource type="BoxShape3D" id="BoxShape3D_8knx6"]
size = Vector3(1, 2, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_l2ci1"]
size = Vector3(1.27087, 1.60907, 0.1)

[sub_resource type="AtlasTexture" id="AtlasTexture_rldk6"]
atlas = ExtResource("7_g1pjd")
region = Rect2(0, 0, 89, 88)

[sub_resource type="SpriteFrames" id="SpriteFrames_e6t04"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_rldk6")
}],
"loop": true,
"name": &"Idle",
"speed": 5.0
}]

[sub_resource type="BoxShape3D" id="BoxShape3D_2pqfk"]
size = Vector3(1, 2, 1)

[sub_resource type="BoxShape3D" id="BoxShape3D_g1pjd"]

[node name="StartingArea" type="GridMap"]
mesh_library = ExtResource("1_mdjaj")
cell_size = Vector3(1, 1, 1)
cell_center_y = false
data = {
"cells": PackedInt32Array(65535, 0, 1048576, 65535, 65535, 1048576, 0, 0, 1441792, 0, 65535, 1441792, 0, 65534, 1441792, 0, 65533, 1441792, 0, 65532, 1441792, 0, 65531, 1441792, 65535, 65534, 1048576, 65535, 65533, 1048576, 65535, 65532, 1048576, 65535, 65531, 1048576, 65535, 2, 655361, 0, 2, 1441793, 65535, 1, 1048576, 0, 1, 1441792, 2, 65530, 1441793, 1, 65530, 655360, 0, 65530, 1441795, 65535, 65530, 1048576, 65535, 65529, 1048577, 0, 65529, 0, 2, 65529, 1441792, 1, 65529, 1048579, 1, 65528, 1048576, 1, 65527, 1048576, 1, 65526, 1048576, 1, 65525, 1048576, 1, 65524, 1048576, 1, 65523, 1048576, 2, 65528, 1441792, 2, 65527, 1441792, 2, 65526, 1441792, 2, 65525, 1441792, 2, 65524, 1441792, 2, 65523, 1441792, 4, 65522, 1441793, 65535, 65522, 655361, 0, 65522, 655360, 3, 65522, 655360, 2, 65522, 1441795, 1, 65522, 655363, 4, 65521, 1441792, 4, 65520, 1441792, 4, 65519, 1441792, 4, 65518, 1441792, 4, 65517, 1441792, 65535, 65521, 1048576, 65535, 65520, 1048576, 65535, 65519, 1048576, 65535, 65518, 1048576, 65535, 65517, 1048576, 65535, 65515, 1048577, 4, 65515, 1, 65535, 65516, 1048576, 4, 65516, 1441792, 1, 65515, 0, 0, 65515, 0, 2, 65515, 0, 3, 65515, 0, 3, 65516, 2, 2, 65516, 2, 1, 65516, 2, 0, 65516, 2, 0, 65517, 2, 0, 65518, 2, 0, 65519, 2, 0, 65520, 2, 0, 65521, 2, 1, 65521, 2, 2, 65521, 2, 3, 65521, 2, 3, 65520, 2, 3, 65519, 2, 3, 65518, 2, 3, 65517, 2, 2, 65517, 2, 1, 65517, 2, 1, 65518, 2, 1, 65519, 2, 1, 65520, 2, 2, 65520, 2, 2, 65519, 2, 2, 65518, 2)
}
metadata/_editor_floor_ = Vector3(0, 0, 0)

[node name="Enemies" type="Node" parent="."]

[node name="StaticBody3D" type="StaticBody3D" parent="Enemies"]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, 2, 0, -15)
collision_layer = 4
script = ExtResource("2_p7vp1")
encounter_data = ExtResource("3_2pqfk")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemies/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.020874, 1.74889, 0)
shape = SubResource("BoxShape3D_dwbtb")

[node name="Sprite" type="AnimatedSprite3D" parent="Enemies/StaticBody3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.73461, 0)
pixel_size = 0.03
texture_filter = 0
sprite_frames = SubResource("SpriteFrames_lwah8")
animation = &"Idle"
frame = 3
frame_progress = 0.162162

[node name="EncounterArea" type="Area3D" parent="Enemies/StaticBody3D"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemies/StaticBody3D/EncounterArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("BoxShape3D_8knx6")

[node name="Body" type="StaticBody3D" parent="Enemies"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0, -20)
collision_layer = 4
script = ExtResource("2_p7vp1")
encounter_data = ExtResource("7_w2sle")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemies/Body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.123597, 1.23832, 0)
shape = SubResource("BoxShape3D_l2ci1")

[node name="Sprite" type="AnimatedSprite3D" parent="Enemies/Body"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.1986, 0)
pixel_size = 0.02
sprite_frames = SubResource("SpriteFrames_e6t04")
animation = &"Idle"

[node name="EncounterArea" type="Area3D" parent="Enemies/Body"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Enemies/Body/EncounterArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
shape = SubResource("BoxShape3D_2pqfk")

[node name="Transitions" type="Node" parent="."]

[node name="Area3D" type="Area3D" parent="Transitions"]
script = ExtResource("7_kjsaj")
map_data = ExtResource("8_w2sle")

[node name="CollisionShape3D" type="CollisionShape3D" parent="Transitions/Area3D"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, -20)
shape = SubResource("BoxShape3D_g1pjd")
