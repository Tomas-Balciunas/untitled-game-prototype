[gd_scene load_steps=20 format=3 uid="uid://cphcmsugjsscn"]

[ext_resource type="Script" uid="uid://bsq341p3oxk46" path="res://scenes/GameState.gd" id="1_o6xl0"]
[ext_resource type="Script" uid="uid://x2dulqp2hx2s" path="res://scenes/dungeon/Dungeon.gd" id="2_o6xl0"]
[ext_resource type="PackedScene" uid="uid://ed1wo7vfltsb" path="res://scenes/Player.tscn" id="2_sugp2"]
[ext_resource type="Script" uid="uid://ciepghup30g3u" path="res://scenes/ui/OverworldInterface.gd" id="4_a8y0u"]
[ext_resource type="Script" uid="uid://2i0e3ty4vxap" path="res://scenes/ui/InterfaceManager.gd" id="4_trceg"]
[ext_resource type="PackedScene" uid="uid://b7tdrca1v88rk" path="res://scenes/PartyPanel.tscn" id="5_85g3d"]
[ext_resource type="Script" uid="uid://ckmaadhfher4" path="res://scripts/TextboxUI.gd" id="5_tbgi4"]
[ext_resource type="Script" uid="uid://by1jny1k3myyb" path="res://scripts/ConversationManager.gd" id="5_tipki"]
[ext_resource type="Script" uid="uid://dfmjvvtvwkjld" path="res://scenes/ui/BattleInterface.gd" id="6_jbj1t"]
[ext_resource type="PackedScene" uid="uid://brybglg3yhb62" path="res://scenes/ui/character/CharacterMenu.tscn" id="6_muem4"]
[ext_resource type="Script" uid="uid://b1m27scdvxtye" path="res://scenes/ui/EventInterface.gd" id="7_muem4"]
[ext_resource type="Script" uid="uid://dpc5d3ykhesm7" path="res://scripts/EncounterManager.gd" id="9_85g3d"]
[ext_resource type="Script" uid="uid://dh87dr7v6jk6m" path="res://scripts/RestManager.gd" id="9_choun"]
[ext_resource type="Script" uid="uid://bseoj2gpvrk32" path="res://scenes/ui/notification/NotificationManager.gd" id="10_ya4ey"]
[ext_resource type="Script" uid="uid://c68om5g7ecgbn" path="res://scenes/ui/PartyInterface.gd" id="11_dp3eg"]
[ext_resource type="Script" uid="uid://mucujpguqn25" path="res://scripts/choice_manager.gd" id="11_eb6dy"]

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_jkv2x"]
bg_color = Color(0, 0.365644, 0.306951, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_jbj1t"]
bg_color = Color(0, 0.559558, 0.459418, 1)

[sub_resource type="StyleBoxFlat" id="StyleBoxFlat_muem4"]
bg_color = Color(0, 0.508119, 0.47713, 1)

[node name="Main" type="Node3D"]
script = ExtResource("1_o6xl0")

[node name="Dungeon" type="GridMap" parent="."]
cell_size = Vector3(1, 1, 1)
cell_center_y = false
script = ExtResource("2_o6xl0")

[node name="TransitionRect" type="ColorRect" parent="Dungeon"]
visible = false
layout_direction = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0.0694218, 0.00964971, 0.263646, 1)

[node name="UIRoot" type="CanvasLayer" parent="."]
script = ExtResource("4_trceg")

[node name="OverworldInterface" type="Control" parent="UIRoot"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("4_a8y0u")

[node name="CharacterMenu" parent="UIRoot/OverworldInterface" instance=ExtResource("6_muem4")]
layout_mode = 1
scale = Vector2(1, 0.67999995)

[node name="BattleInterface" type="Control" parent="UIRoot"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("6_jbj1t")

[node name="VBoxContainer" type="VBoxContainer" parent="UIRoot/BattleInterface"]
z_index = 5
layout_mode = 0
offset_left = 151.0
offset_top = 512.0
offset_right = 216.0
offset_bottom = 683.0

[node name="AttackButton" type="Button" parent="UIRoot/BattleInterface/VBoxContainer"]
layout_mode = 2
focus_mode = 0
theme_override_styles/focus = SubResource("StyleBoxFlat_jkv2x")
action_mode = 0
text = "Attack"

[node name="DefendButton" type="Button" parent="UIRoot/BattleInterface/VBoxContainer"]
layout_mode = 2
focus_mode = 0
theme_override_styles/hover = SubResource("StyleBoxFlat_jbj1t")
text = "Defend"

[node name="SkillButton" type="Button" parent="UIRoot/BattleInterface/VBoxContainer"]
layout_mode = 2
focus_mode = 0
text = "Skill"

[node name="ItemButton" type="Button" parent="UIRoot/BattleInterface/VBoxContainer"]
layout_mode = 2
focus_mode = 0
theme_override_styles/hover = SubResource("StyleBoxFlat_muem4")
text = "Item"

[node name="FleeButton" type="Button" parent="UIRoot/BattleInterface/VBoxContainer"]
layout_mode = 2
focus_mode = 0
text = "Flee"

[node name="Skill" type="Control" parent="UIRoot/BattleInterface"]
visible = false
layout_mode = 1
anchor_left = 0.262
anchor_top = 0.354
anchor_right = 0.362
anchor_bottom = 0.577
offset_left = 8.63995
offset_top = 0.127991
offset_right = 0.639984
offset_bottom = -0.136017

[node name="ScrollContainer" type="ScrollContainer" parent="UIRoot/BattleInterface/Skill"]
layout_mode = 1
anchors_preset = -1
anchor_left = -1.2
anchor_top = -0.327
anchor_bottom = 1.357
offset_left = -7.0
offset_top = -36.083
offset_right = -7.0
offset_bottom = -36.047
horizontal_scroll_mode = 0

[node name="SkillListContainer" type="VBoxContainer" parent="UIRoot/BattleInterface/Skill/ScrollContainer"]
layout_mode = 2
mouse_filter = 2

[node name="SkillInfoPanel" type="VBoxContainer" parent="UIRoot/BattleInterface/Skill"]
visible = false
layout_mode = 0
anchor_left = -1.2
anchor_top = -2.48
anchor_right = 1.067
anchor_bottom = -1.45
offset_left = -8.0
offset_top = -135.92
offset_right = -8.04001
offset_bottom = -132.05
grow_horizontal = 2
grow_vertical = 2

[node name="SkillName" type="Label" parent="UIRoot/BattleInterface/Skill/SkillInfoPanel"]
layout_mode = 2
mouse_filter = 0

[node name="SkillCost" type="Label" parent="UIRoot/BattleInterface/Skill/SkillInfoPanel"]
layout_mode = 2

[node name="SkillDescription" type="Label" parent="UIRoot/BattleInterface/Skill/SkillInfoPanel"]
layout_mode = 2

[node name="Item" type="Control" parent="UIRoot/BattleInterface"]
visible = false
layout_mode = 1
anchor_left = 0.231
anchor_top = 0.406
anchor_right = 0.325
anchor_bottom = 0.625
offset_left = 0.320007
offset_top = 0.191986
offset_right = -3.05176e-05
offset_bottom = 3.0

[node name="ScrollContainer" type="ScrollContainer" parent="UIRoot/BattleInterface/Item"]
layout_mode = 1
anchors_preset = -1
anchor_left = -0.858
anchor_top = -0.608
anchor_right = 0.333
anchor_bottom = 1.17
offset_left = -0.0399933
offset_top = -13.032
offset_right = 1.04
offset_bottom = -8.07001
horizontal_scroll_mode = 0

[node name="ItemListContainer" type="VBoxContainer" parent="UIRoot/BattleInterface/Item/ScrollContainer"]
layout_mode = 2

[node name="ItemInfoPanel" type="VBoxContainer" parent="UIRoot/BattleInterface/Item"]
visible = false
layout_mode = 1
anchors_preset = -1
anchor_left = -1.2
anchor_top = -2.48
anchor_right = 1.067
anchor_bottom = -1.45
offset_left = 32.0
offset_top = -143.92
offset_right = 31.96
offset_bottom = -140.05
grow_horizontal = 2
grow_vertical = 2

[node name="ItemName" type="Label" parent="UIRoot/BattleInterface/Item/ItemInfoPanel"]
layout_mode = 2
mouse_filter = 0

[node name="ItemDescription" type="Label" parent="UIRoot/BattleInterface/Item/ItemInfoPanel"]
layout_mode = 2

[node name="VBoxContainer2" type="VBoxContainer" parent="UIRoot/BattleInterface"]
layout_mode = 0
offset_top = -424.0
offset_right = 40.0
offset_bottom = -384.0

[node name="EventInterface" type="Control" parent="UIRoot"]
visible = false
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("7_muem4")

[node name="ConversationManager" type="Node" parent="UIRoot/EventInterface"]
script = ExtResource("5_tipki")

[node name="TextboxUI" type="Control" parent="UIRoot/EventInterface/ConversationManager"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = -4.0
grow_horizontal = 2
grow_vertical = 2
script = ExtResource("5_tbgi4")

[node name="Panel" type="Panel" parent="UIRoot/EventInterface/ConversationManager/TextboxUI"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
offset_bottom = 4.0
grow_horizontal = 2
grow_vertical = 2

[node name="SpeakerLabel" type="Label" parent="UIRoot/EventInterface/ConversationManager/TextboxUI/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.325
anchor_top = 0.714
anchor_right = 0.505
anchor_bottom = 0.804
offset_top = -0.0400085
offset_right = 108.8
offset_bottom = 7.56
theme_override_font_sizes/font_size = 20

[node name="TextLabel" type="Label" parent="UIRoot/EventInterface/ConversationManager/TextboxUI/Panel"]
layout_mode = 1
anchors_preset = -1
anchor_left = 0.32
anchor_top = 0.839
anchor_right = 0.56
anchor_bottom = 1.0
offset_left = -6.10352e-05
offset_top = 0.255981
theme_override_font_sizes/font_size = 20

[node name="ChoiceManager" type="Node" parent="UIRoot/EventInterface"]
script = ExtResource("11_eb6dy")

[node name="PartyInterface" type="Control" parent="UIRoot"]
layout_mode = 3
anchors_preset = 0
offset_right = 40.0
offset_bottom = 40.0
script = ExtResource("11_dp3eg")

[node name="PartyPanel" parent="UIRoot/PartyInterface" instance=ExtResource("5_85g3d")]
layout_mode = 1
offset_top = 543.36
offset_bottom = 543.32794
grow_vertical = 0

[node name="Managers" type="Node" parent="."]

[node name="EncounterManager" type="Node" parent="Managers"]
script = ExtResource("9_85g3d")

[node name="BattleTransition" type="ColorRect" parent="Managers/EncounterManager"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(0.545098, 0, 0, 1)

[node name="RestManager" type="Node" parent="Managers"]
script = ExtResource("9_choun")

[node name="NotificationManager" type="Node" parent="Managers"]
script = ExtResource("10_ya4ey")

[node name="Player" parent="." instance=ExtResource("2_sugp2")]
